dist: xenial
language: node_js
node_js:
- 10.9.0
cache:
  directories:
  - node_modules
services:
- postgresql
addons:
  postgresql: "10"
before_install:
- sudo sed -i -e '/local.*peer/s/postgres/all/' -e 's/peer\|md5/trust/g' /etc/postgresql/*/main/pg_hba.conf
- sudo service postgresql restart
- sleep 1
before_script:
- ps aux | grep postgres
- psql -c 'create database travis_ci_test;' -U postgres
script:
- node server/setup.js
- npm test
